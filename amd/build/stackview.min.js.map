{"version":3,"sources":["../src/stackview.js"],"names":["define","$","$slick","copyToClipboard","containerid","window","getSelection","empty","removeAllRanges","document","selection","range","body","createTextRange","moveToElementText","getElementById","select","execCommand","createRange","selectNode","addRange","alert","loadSlick","fn","extend","disableSelection","each","onselectstart","unselectable","css","ready","on","event","slick","currentSlide","i","calc","slideCount","text","attr","slider","vertical","slidesToShow","slidesToScroll","autoplay","dots","speed","arrows","swipeToSlide","e","preventDefault","$el","target","tagName","type","originalEvent","deltaY","before","touchCounter","setInterval","clearInterval","clickTimeout","clearTimeout","init","console","log"],"mappings":"AAyBAA,OAAM,2BAAC,CAAC,QAAD,CAAW,gEAAX,CAAD,CAA+E,SAAUC,CAAV,CAAa,CAE9F,aAF8F,GAI1FC,CAAAA,CAAM,CAAGD,CAAC,CAAC,eAAD,CAJgF,CAM1FE,CAAe,CAAG,SAAUC,CAAV,CAAuB,CAEzC,GAAIC,MAAM,CAACC,YAAX,CAAyB,CACrB,GAAID,MAAM,CAACC,YAAP,GAAsBC,KAA1B,CAAiC,CAC7BF,MAAM,CAACC,YAAP,GAAsBC,KAAtB,EACH,CAFD,IAEO,IAAIF,MAAM,CAACC,YAAP,GAAsBE,eAA1B,CAA2C,CAC9CH,MAAM,CAACC,YAAP,GAAsBE,eAAtB,EACH,CACJ,CAND,IAMO,IAAIC,QAAQ,CAACC,SAAb,CAAwB,CAC3BD,QAAQ,CAACC,SAAT,CAAmBH,KAAnB,EACH,CAED,GAAIE,QAAQ,CAACC,SAAb,CAAwB,CACpB,GAAIC,CAAAA,CAAK,CAAGF,QAAQ,CAACG,IAAT,CAAcC,eAAd,EAAZ,CACAF,CAAK,CAACG,iBAAN,CAAwBL,QAAQ,CAACM,cAAT,CAAwBX,CAAxB,CAAxB,EACAO,CAAK,CAACK,MAAN,GAAeH,eAAf,GACAJ,QAAQ,CAACQ,WAAT,CAAqB,MAArB,CACH,CALD,IAKO,IAAIZ,MAAM,CAACC,YAAX,CAAyB,CAC5B,GAAIK,CAAAA,CAAK,CAAGF,QAAQ,CAACS,WAAT,EAAZ,CACAP,CAAK,CAACQ,UAAN,CAAiBV,QAAQ,CAACM,cAAT,CAAwBX,CAAxB,CAAjB,EACAC,MAAM,CAACC,YAAP,GAAsBc,QAAtB,CAA+BT,CAA/B,EACAF,QAAQ,CAACQ,WAAT,CAAqB,MAArB,CACH,CAEDI,KAAK,CAAC,qBAAD,CACR,CA/B6F,CAiC1FC,CAAS,CAAG,UAAY,CAExBrB,CAAC,CAACsB,EAAF,CAAKC,MAAL,CAAY,CACRC,gBAAgB,CAAE,2BAAY,CAC1B,KAAKC,IAAL,CAAU,UAAY,CAClB,KAAKC,aAAL,CAAqB,UAAY,CAC7B,QACH,CAFD,CAGA,KAAKC,YAAL,CAAoB,IAApB,CACA3B,CAAC,CAAC,IAAD,CAAD,CAAQ4B,GAAR,CAAY,kBAAZ,CAAgC,MAAhC,EACA5B,CAAC,CAAC,IAAD,CAAD,CAAQ4B,GAAR,CAAY,qBAAZ,CAAmC,MAAnC,CACH,CAPD,EAQA,MAAO,KACV,CAXO,CAAZ,EAcA5B,CAAC,CAACQ,QAAD,CAAD,CAAYqB,KAAZ,CAAkB,UAAY,CAE1B5B,CAAM,CAAC6B,EAAP,CAAU,yBAAV,CAAqC,SAAUC,CAAV,CAAiBC,CAAjB,CAAwBC,CAAxB,CAAsC,IACnEC,CAAAA,CAAC,CAAG,CAACD,CAAY,CAAGA,CAAH,CAAkB,CAA/B,EAAoC,CAD2B,CAEnEE,CAAI,CAAgC,GAA7B,EAAED,CAAD,CAAOF,CAAK,CAACI,UAAd,CAF4D,CAIvEpC,CAAC,CAAC,gBAAD,CAAD,CAAoBqC,IAApB,CAAyBH,CAAC,CAAG,GAAJ,CAAUF,CAAK,CAACI,UAAzC,EACApC,CAAC,CAAC,oBAAD,CAAD,CAAwB4B,GAAxB,CAA4B,iBAA5B,CAA+C,QAAUO,CAAV,CAAiB,GAAhE,EACKG,IADL,CACU,eADV,CAC2BH,CAD3B,CAEH,CAPD,EASA,GAAII,CAAAA,CAAM,CAAGtC,CAAM,CAAC+B,KAAP,CAAa,CACtBQ,QAAQ,GADc,CAEtBC,YAAY,CAAE,CAFQ,CAGtBC,cAAc,CAAE,CAHM,CAItBC,QAAQ,GAJc,CAKtBC,IAAI,GALkB,CAMtBC,KAAK,CAAE,CANe,CAOtBC,MAAM,GAPgB,CAQtBC,YAAY,GARU,CAAb,CAAb,CAWAR,CAAM,CAACT,EAAP,CAAU,aAAV,CAA0B,SAAUkB,CAAV,CAAa,CACnCA,CAAC,CAACC,cAAF,GACA,GAAIC,CAAAA,CAAG,CAAGlD,CAAC,CAAC,IAAD,CAAX,CAEA,GAAyB,KAArB,GAAAgD,CAAC,CAACG,MAAF,CAASC,OAAT,EAAmD,KAArB,GAAAJ,CAAC,CAACG,MAAF,CAASC,OAA3C,CAA8D,CAE1D,GAAe,OAAX,GAAAJ,CAAC,CAACK,IAAN,CAAwB,CACpBH,CAAG,CAAClB,KAAJ,CAAU,WAAV,EACA,MACH,CAED,GAA6B,CAAzB,CAAAgB,CAAC,CAACM,aAAF,CAAgBC,MAApB,CAAgC,CAC5BL,CAAG,CAAClB,KAAJ,CAAU,WAAV,CACH,CAFD,IAEO,CACHkB,CAAG,CAAClB,KAAJ,CAAU,WAAV,CACH,CACJ,CACJ,CAjBD,EAmBAhC,CAAC,CAAC,aAAD,CAAD,CAAiBwD,MAAjB,CAAwB,sGACYvD,CAAM,CAAC+B,KAAP,CAAa,UAAb,EAAyBI,UADrC,kHAAxB,EAKApC,CAAC,CAAC,MAAD,CAAD,CAAUwB,gBAAV,GAEA,GAAIiC,CAAAA,CAAJ,CACAzD,CAAC,CAAC,iBAAD,CAAD,CAAqB8B,EAArB,CAAwB,YAAxB,CAAuC,UAAY,CAC/C2B,CAAY,CAAGC,WAAW,CAAC,UAAY,CACnCzD,CAAM,CAAC+B,KAAP,CAAa,WAAb,CACH,CAFyB,CAEvB,GAFuB,CAG7B,CAJD,EAIIF,EAJJ,CAIO,UAJP,CAIoB,UAAY,CAC5B6B,aAAa,CAACF,CAAD,CAAb,CACAA,CAAY,CAAG,IAClB,CAPD,EAOI3B,EAPJ,CAOO,WAPP,CAOoB,UAAY,CAC5B7B,CAAM,CAAC+B,KAAP,CAAa,WAAb,CACH,CATD,EAWAhC,CAAC,CAAC,aAAD,CAAD,CAAiB8B,EAAjB,CAAoB,YAApB,CAAmC,UAAY,CAC3C2B,CAAY,CAAGC,WAAW,CAAC,UAAY,CACnCzD,CAAM,CAAC+B,KAAP,CAAa,WAAb,CACH,CAFyB,CAEvB,GAFuB,CAG7B,CAJD,EAIIF,EAJJ,CAIO,UAJP,CAIoB,UAAY,CAC5B6B,aAAa,CAACF,CAAD,CAAb,CACAA,CAAY,CAAG,IAClB,CAPD,EAOI3B,EAPJ,CAOO,WAPP,CAOoB,UAAY,CAC5B7B,CAAM,CAAC+B,KAAP,CAAa,WAAb,CACH,CATD,EAYA,GAAI4B,CAAAA,CAAY,CAAG,CAAnB,CACA5D,CAAC,CAAC,aAAD,CAAD,CAAiB8B,EAAjB,CAAoB,WAApB,CAAiC,UAAY,CACzC8B,CAAY,CAAGF,WAAW,CAAC,UAAY,CACnCzD,CAAM,CAAC+B,KAAP,CAAa,WAAb,CACH,CAFyB,CAEvB,GAFuB,CAG7B,CAJD,EAIGF,EAJH,CAIM,oBAJN,CAI4B,UAAY,CACpC+B,YAAY,CAACD,CAAD,CACf,CAND,EAQA5D,CAAC,CAAC,iBAAD,CAAD,CAAqB8B,EAArB,CAAwB,WAAxB,CAAqC,UAAY,CAC7C8B,CAAY,CAAGF,WAAW,CAAC,UAAY,CACnCzD,CAAM,CAAC+B,KAAP,CAAa,WAAb,CACH,CAFyB,CAEvB,GAFuB,CAG7B,CAJD,EAIGF,EAJH,CAIM,oBAJN,CAI4B,UAAY,CACpC+B,YAAY,CAACD,CAAD,CACf,CAND,EAQA5D,CAAC,CAACI,MAAD,CAAD,CAAU0B,EAAV,CAAa,0BAAb,CAAyC,UAAY,CACjD7B,CAAM,CAAC+B,KAAP,CAAa,QAAb,CACH,CAFD,EAIAhC,CAAC,CAAC,wBAAD,CAAD,CAA4B8B,EAA5B,CAA+B,OAA/B,CAAwC,UAAY,CAChD5B,CAAe,CAAC,YAAD,CAClB,CAFD,CAGH,CAhGD,CAiGH,CAlJ6F,CAoJ9F,MAAO,CACH4D,IAAI,CAAE,eAAY,CAEdC,OAAO,CAACC,GAAR,CAAY,6CAAZ,EACA3C,CAAS,EACZ,CALE,CAOV,CA3JK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript for needed to load the stackviewer\n *\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n *\n * @package   mod_stackview\n * @copyright 09/05/2021 Mfreak.nl | LdesignMedia.nl - Luuk Verhoeven\n * @author    Luuk Verhoeven\n **/\n/*eslint-disable no-console*/\ndefine(['jquery', '//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js'], function ($) {\n\n    'use strict';\n\n    let $slick = $('#slick-slider');\n\n    let copyToClipboard = function (containerid) {\n\n        if (window.getSelection) {\n            if (window.getSelection().empty) { // Chrome\n                window.getSelection().empty();\n            } else if (window.getSelection().removeAllRanges) { // Firefox\n                window.getSelection().removeAllRanges();\n            }\n        } else if (document.selection) { // IE?\n            document.selection.empty();\n        }\n\n        if (document.selection) {\n            let range = document.body.createTextRange();\n            range.moveToElementText(document.getElementById(containerid));\n            range.select().createTextRange();\n            document.execCommand(\"copy\");\n        } else if (window.getSelection) {\n            let range = document.createRange();\n            range.selectNode(document.getElementById(containerid));\n            window.getSelection().addRange(range);\n            document.execCommand(\"copy\");\n        }\n\n        alert(\"Copied to clipboard\");\n    };\n\n    let loadSlick = function () {\n\n        $.fn.extend({\n            disableSelection: function () {\n                this.each(function () {\n                    this.onselectstart = function () {\n                        return false;\n                    };\n                    this.unselectable = \"on\";\n                    $(this).css('-moz-user-select', 'none');\n                    $(this).css('-webkit-user-select', 'none');\n                });\n                return this;\n            }\n        });\n\n        $(document).ready(function () {\n\n            $slick.on('init reInit afterChange', function (event, slick, currentSlide) {\n                let i = (currentSlide ? currentSlide : 0) + 1;\n                let calc = ((i) / (slick.slideCount)) * 100;\n\n                $('#slick-counter').text(i + '/' + slick.slideCount);\n                $('#slick-progressbar').css('background-size', '100% ' + calc + '%')\n                    .attr('aria-valuenow', calc);\n            });\n\n            let slider = $slick.slick({\n                vertical: true,\n                slidesToShow: 1,\n                slidesToScroll: 1,\n                autoplay: false,\n                dots: false,\n                speed: 1,\n                arrows: false,\n                swipeToSlide: false,\n            });\n\n            slider.on('wheel click', (function (e) {\n                e.preventDefault();\n                let $el = $(this);\n\n                if (e.target.tagName === 'IMG' || e.target.tagName === 'DIV') {\n\n                    if (e.type === 'click') {\n                        $el.slick('slickNext');\n                        return;\n                    }\n\n                    if (e.originalEvent.deltaY > 0) {\n                        $el.slick('slickNext');\n                    } else {\n                        $el.slick('slickPrev');\n                    }\n                }\n            }));\n\n            $('.slick-list').before('<span class=\"previous-slide\"><i class=\"fa fa-angle-up\"></i></span>' +\n                '<span id=\"slick-counter\">1/' + $slick.slick(\"getSlick\").slideCount + '</span>' +\n                '<div id=\"slick-progressbar\"></div>' +\n                '<span class=\"next-slide\"><i class=\"fa fa-angle-down\"></i></span>');\n\n            $('body').disableSelection();\n\n            let touchCounter;\n            $('.previous-slide').on('touchstart', (function () {\n                touchCounter = setInterval(function () {\n                    $slick.slick('slickPrev');\n                }, 200);\n            })).on('touchend', (function () {\n                clearInterval(touchCounter);\n                touchCounter = null;\n            })).on(\"mousedown\", function () {\n                $slick.slick('slickPrev');\n            });\n\n            $('.next-slide').on('touchstart', (function () {\n                touchCounter = setInterval(function () {\n                    $slick.slick('slickNext');\n                }, 200);\n            })).on('touchend', (function () {\n                clearInterval(touchCounter);\n                touchCounter = null;\n            })).on(\"mousedown\", function () {\n                $slick.slick('slickNext');\n            });\n\n            // Mouse click and hold.\n            let clickTimeout = 0;\n            $('.next-slide').on('mousedown', function () {\n                clickTimeout = setInterval(function () {\n                    $slick.slick('slickNext');\n                }, 200);\n            }).on('mouseup mouseleave', function () {\n                clearTimeout(clickTimeout);\n            });\n\n            $('.previous-slide').on('mousedown', function () {\n                clickTimeout = setInterval(function () {\n                    $slick.slick('slickPrev');\n                }, 200);\n            }).on('mouseup mouseleave', function () {\n                clearTimeout(clickTimeout);\n            });\n\n            $(window).on('resize orientationchange', function () {\n                $slick.slick('resize');\n            });\n\n            $('.stackviewer-embedcode').on('click', function () {\n                copyToClipboard(\"stack-code\");\n            });\n        });\n    };\n\n    return {\n        init: function () {\n            // eslint-disable-next-line\n            console.log('Load Stackviewer v3.9.2 (based on slick.js)');\n            loadSlick();\n        }\n    };\n});"],"file":"stackview.min.js"}