{"version":3,"sources":["../src/stackview.js"],"names":["define","$","$slick","copyToClipboard","containerid","window","getSelection","empty","removeAllRanges","document","selection","range","body","createTextRange","moveToElementText","getElementById","select","execCommand","createRange","selectNode","addRange","alert","loadSlick","ready","on","event","slick","currentSlide","i","calc","slideCount","text","css","attr","slider","vertical","slidesToShow","slidesToScroll","autoplay","dots","speed","arrows","swipeToSlide","e","preventDefault","$el","type","originalEvent","deltaY","before","init","console","log"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript for needed to load the stackviewer\n *\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n *\n * @package   mod_stackview\n * @copyright 09/05/2021 Mfreak.nl | LdesignMedia.nl - Luuk Verhoeven\n * @author    Luuk Verhoeven\n **/\n/*eslint-disable no-console*/\ndefine(['jquery', '//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js'], function($) {\n\n    'use strict';\n\n    let $slick = $('#slick-slider');\n\n    let copyToClipboard = function(containerid) {\n\n        if (window.getSelection) {\n            if (window.getSelection().empty) { // Chrome\n                window.getSelection().empty();\n            } else if (window.getSelection().removeAllRanges) { // Firefox\n                window.getSelection().removeAllRanges();\n            }\n        } else if (document.selection) { // IE?\n            document.selection.empty();\n        }\n\n        if (document.selection) {\n            let range = document.body.createTextRange();\n            range.moveToElementText(document.getElementById(containerid));\n            range.select().createTextRange();\n            document.execCommand(\"copy\");\n        } else if (window.getSelection) {\n            let range = document.createRange();\n            range.selectNode(document.getElementById(containerid));\n            window.getSelection().addRange(range);\n            document.execCommand(\"copy\");\n        }\n\n        alert(\"Copied to clipboard\");\n    };\n\n    let loadSlick = function() {\n\n        $(document).ready(function() {\n\n            $slick.on('init reInit afterChange', function(event, slick, currentSlide) {\n                let i = (currentSlide ? currentSlide : 0) + 1;\n                let calc = ((i) / (slick.slideCount)) * 100;\n\n                $('#slick-counter').text(i + '/' + slick.slideCount);\n                $('#slick-progressbar').css('background-size', '100% ' + calc + '%')\n                    .attr('aria-valuenow', calc);\n            });\n\n            let slider = $slick.slick({\n                vertical: true,\n                slidesToShow: 1,\n                slidesToScroll: 1,\n                autoplay: false,\n                dots: false,\n                speed: 1,\n                arrows: false,\n                swipeToSlide: false,\n            });\n\n            slider.on('wheel click', (function(e) {\n                e.preventDefault();\n                let $el = $(this);\n\n                if (e.type === 'click') {\n                    $el.slick('slickNext');\n                    return;\n                }\n\n                if (e.originalEvent.deltaY > 0) {\n                    $el.slick('slickNext');\n                } else {\n                    $el.slick('slickPrev');\n                }\n            }));\n\n            $('.slick-list').before('<span id=\"slick-counter\">1/' + $slick.slick(\"getSlick\").slideCount + '</span>' +\n                '                           <div id=\"slick-progressbar\"></div>');\n\n            $(window).on('resize orientationchange', function() {\n                $slick.slick('resize');\n            });\n\n            $('.stackviewer-embedcode').on('click', function() {\n                copyToClipboard(\"stack-code\");\n            });\n        });\n    };\n\n    return {\n        init: function() {\n            // eslint-disable-next-line\n            console.log('Load Stackviewer v3.9.2 (based on slick.js)');\n            loadSlick();\n        }\n    };\n});"],"file":"stackview.min.js"}