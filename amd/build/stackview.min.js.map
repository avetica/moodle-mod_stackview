{"version":3,"sources":["../src/stackview.js"],"names":["define","$","$slick","copyToClipboard","containerid","el","document","createElement","value","getElementById","innerHTML","setAttribute","style","position","left","body","appendChild","select","execCommand","removeChild","alert","loadSlick","fn","extend","disableSelection","each","onselectstart","unselectable","css","ready","on","event","slick","currentSlide","i","calc","slideCount","text","attr","slider","vertical","slidesToShow","slidesToScroll","autoplay","dots","speed","arrows","swipeToSlide","e","preventDefault","$el","target","tagName","type","originalEvent","deltaY","before","touchCounter","setInterval","clearInterval","clickTimeout","clearTimeout","window","init"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript for needed to load the stackviewer\n * @TODO rewrite to ES6 uses old jQuery (slick uses jQuery need more time to rewrite)\n *\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @copyright 09/05/2021 Mfreak.nl | LdesignMedia.nl - Luuk Verhoeven\n * @author    Luuk Verhoeven\n **/\n\ndefine(['jquery', 'mod_stackview/slick'], function($) {\n\n    'use strict';\n\n    let $slick = $('#slick-slider');\n\n    /**\n     * CopyToClipboard\n     *\n     * @param {string} containerid\n     */\n    let copyToClipboard = function(containerid) {\n\n        const el = document.createElement('textarea');\n        el.value = document.getElementById(containerid).innerHTML;\n        el.setAttribute('readonly', '');\n        el.style.position = 'absolute';\n        el.style.left = '-9999px';\n        document.body.appendChild(el);\n        el.select();\n        document.execCommand('copy');\n        document.body.removeChild(el);\n\n        alert(\"Copied to clipboard\");\n    };\n\n    let loadSlick = function() {\n\n        $.fn.extend({\n            disableSelection: function() {\n                this.each(function() {\n                    this.onselectstart = function() {\n                        return false;\n                    };\n                    this.unselectable = \"on\";\n                    $(this).css('-moz-user-select', 'none');\n                    $(this).css('-webkit-user-select', 'none');\n                });\n                return this;\n            }\n        });\n\n        $(document).ready(function() {\n\n            $slick.on('init reInit afterChange', function(event, slick, currentSlide) {\n                let i = (currentSlide ? currentSlide : 0) + 1;\n                let calc = ((i) / (slick.slideCount)) * 100;\n\n                $('#slick-counter').text(i + '/' + slick.slideCount);\n                $('#slick-progressbar').css('background-size', '100% ' + calc + '%')\n                    .attr('aria-valuenow', calc);\n            });\n\n            let slider = $slick.slick({\n                vertical: true,\n                slidesToShow: 1,\n                slidesToScroll: 1,\n                autoplay: false,\n                dots: false,\n                speed: 1,\n                arrows: false,\n                swipeToSlide: false,\n            });\n\n            slider.on('wheel click', (function(e) {\n                e.preventDefault();\n                let $el = $(this);\n\n                if (e.target.tagName === 'IMG' || e.target.tagName === 'DIV') {\n\n                    if (e.type === 'click') {\n                        $el.slick('slickNext');\n                        return;\n                    }\n\n                    if (e.originalEvent.deltaY > 0) {\n                        $el.slick('slickNext');\n                    } else {\n                        $el.slick('slickPrev');\n                    }\n                }\n            }));\n\n            $('.slick-list').before('<span class=\"previous-slide\"><i class=\"fa fa-angle-up\"></i></span>' +\n                '<span id=\"slick-counter\">1/' + $slick.slick(\"getSlick\").slideCount +\n                '</span>' + '<div id=\"slick-progressbar\"></div>' +\n                '<span class=\"next-slide\"><i class=\"fa fa-angle-down\"></i></span>');\n\n            $('body').disableSelection();\n\n            let touchCounter;\n            $('.previous-slide').on('touchstart', (function() {\n                touchCounter = setInterval(function() {\n                    $slick.slick('slickPrev');\n                }, 200);\n            })).on('touchend', (function() {\n                clearInterval(touchCounter);\n                touchCounter = null;\n            })).on(\"mousedown\", function() {\n                $slick.slick('slickPrev');\n            });\n\n            $('.next-slide').on('touchstart', (function() {\n                touchCounter = setInterval(function() {\n                    $slick.slick('slickNext');\n                }, 200);\n            })).on('touchend', (function() {\n                clearInterval(touchCounter);\n                touchCounter = null;\n            })).on(\"mousedown\", function() {\n                $slick.slick('slickNext');\n            });\n\n            // Mouse click and hold.\n            let clickTimeout = 0;\n            $('.next-slide').on('mousedown', function() {\n                clickTimeout = setInterval(function() {\n                    $slick.slick('slickNext');\n                }, 200);\n            }).on('mouseup mouseleave', function() {\n                clearTimeout(clickTimeout);\n            });\n\n            $('.previous-slide').on('mousedown', function() {\n                clickTimeout = setInterval(function() {\n                    $slick.slick('slickPrev');\n                }, 200);\n            }).on('mouseup mouseleave', function() {\n                clearTimeout(clickTimeout);\n            });\n\n            $(window).on('resize orientationchange', function() {\n                $slick.slick('resize');\n            });\n\n            $('.stackviewer-embedcode').on('click', function() {\n                copyToClipboard(\"stack-code\");\n            });\n        });\n    };\n\n    return {\n        init: function() {\n            loadSlick();\n        }\n    };\n});\n"],"file":"stackview.min.js"}