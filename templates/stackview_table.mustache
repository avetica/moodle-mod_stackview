{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @package mod_stackview
    @copyright 10/05/2021 Mfreak.nl | LdesignMedia.nl - Luuk Verhoeven
    @author    Luuk Verhoeven
}}
<div class="stackview-table">
    <a href="{{addurl}}" class="btn btn-primary">
        {{# str}} btn:add, mod_stackview {{/ str}}
    </a>
    <hr>
    <table class="table table-striped">
        <tr>
            <th>{{# str}} thead:icon, mod_stackview {{/ str}}</th>
            <th>{{# str}} thead:name, mod_stackview {{/ str}}</th>
            <th>{{# str}} thead:action, mod_stackview {{/ str}}</th>
        </tr>
        {{#files}}
            <tr>
                <td>{{icon}}</td>
                <td>{{filename}}</td>
                <td>{{actions}}</td>
            </tr>
        {{/files}}
    </table>
</div>
<script>
        {{#js}}
        require(['core/notification'], function(Notification) {

            const deleteButtons = document.querySelectorAll('.btn-danger');
            for (const button of deleteButtons) {
                button.addEventListener('click', function(event) {
                    event.preventDefault();

                    let href = this.getAttribute('href');
                    Notification.confirm(
                            '{{# str}} js:confirm_delete_title, mod_stackview {{/ str}}',
                            '{{# str}} js:confirm_delete_message, mod_stackview {{/ str}}',
                            '{{# str}} btn:confirm, mod_stackview {{/ str}}',
                            '{{# str}} btn:cancel, mod_stackview {{/ str}}',
                            function() {
                                window.location = href;
                            });
                })
            }

        });
        {{/js}}
</script>